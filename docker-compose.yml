version: "3.3"

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    depends_on:
      - podcast-db
    entrypoint:
      - dotnet
      - backend.dll
    ports:
      - 6001:6001
    expose:
      - '6001'
  podcast-db:
    image: mcr.microsoft.com/mssql/server:2017-CU14-ubuntu
    ports:
      - 3306:3306
    expose:
      - '3306'
    volumes:
      - podcast-vol:/var/opt/mssql
    environment:
      SA_PASSWORD: "Password1"
      ACCEPT_EULA: "Y"
volumes:
  podcast-vol: